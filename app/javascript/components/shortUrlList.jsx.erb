import React from 'react';


export default function ShortUrlList({ copyToClipboard }) {
  const [shortUrls, setShortUrls] = React.useState([]);

  React.useEffect(() => {
    fetch('<%= Rails.application.routes.url_helpers.short_urls_path(format: "json") %>')
      .then(response => response.json())
      .then(setShortUrls);
  }, []);

  return (
    <table>
      <thead>
        <tr>
          <th>URL</th>
          <th>CÃ³digo corto</th>
          <th>Visitas</th>
        </tr>
      </thead>

      <tbody>
        {shortUrls.map(({ url, short_code, short_url, visits }, i) =>
          <tr key={i}>
            <td>{url}</td>
            <td>
              {short_code}
              <a className="copy-icon" onClick={() => copyToClipboard(short_url)}>
                <i className="material-icons">content_copy</i>
              </a>
            </td>
            <td>{visits}</td>
          </tr>
        )}
      </tbody>
    </table>
  );
}
